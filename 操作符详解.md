# 操作符详解

## 操作符

分类：

## 算数操作符

```c
+  -  *  /   %
```

1.除了%外，其他都能对整形或者浮点数进行运算 

2.对于/操作符如果两个操作数都为整数，则执行整数除法，只要里面有浮点数则进行的是浮点数除法

3.%操作符的两操作数必须为整数，返回的是余数

求一个整数存储在内存中的二进制中1的个数

**不借助临时变量将两个变量的值交换**

```c
int main()
{
    int a=3;
    int b=5;
    printf("a=%d b=%d",a,b);
    
    a=a^b;       //a^b^b=a  a^b^a=b								
    b=a^b;
    a=a^b;
    return 0;
}
```

**求一个整数存储在内存中的二进制中1的个数**

```c
//int a=7;
//00000000000000000000000000000110
//123
//123%10  得到3
//123/10=12 去掉3
// %10 /10
```

```c
int count_one(int n)
{
    int count=0;
    while(n)//n如果不是0，二进制序列一定有1
    {
        if(n%2==1)
        {
            count++;
        }
        n=n/2;
    }
    return count;
}
int main()
{
    int a=6;
    int ret=count_one(a);
    printf("%d\n",ret);
    return 0;
}
```

这个代码有问题的，如果a=-1时，编译的1的个数为0，

```c
int count_one(int n)
{
   int count=0;
    int i=0;
    for(i=0;i<32;i++)
    {
        if(((n>>i)&1)==1)
        {
            count++;
        }
    }
    return count;
}
int main()
{
    int a=-1;
    //原码：10000000000000000000000001
    //反码：11111111111111111111111110
    //补码：11111111111111111111111111
    //内存中存的是补码
    //让这个数字和1按位与
    //11111111111111111111111111111111
    //00000000000000000000000000000001
    //00000000000000000000000000000001
    //最后一位为1得到1，最后一位为0得到0
    int ret=count_one(a);
    printf("%d\n",ret);
    return 0;
}
```

上面的代码一定会循环32次，下面这个代码更高效

```c
//n=n&(n-1)
//每一次都让二进制序列中最右边的1消失
//在n变成0之前，让n=n&(n-1)，这个操作执行一次count++
//n=7
//111-n
//110
//110-n
//101
//100-n
//011
//000-n
int count_one(int n)
{
    int count=0;
	while(n)
    {
        n=n&(n-1);
        count++;
    }
    return count;
}
int main()
{
    int a=-1;
    int ret=count_one(a);
    printf("%d\n",ret);
    return 0;
}
```

### 赋值操作符

```c
int main()
{
    int a=0;
    a=3;//赋值操作符
    
    //与==容易混淆，判断是否相等
}
```

赋值操作符可以连续赋值，但是不建议

### 复合赋值符

```c
int main()
{
    int a=0;
    a=a+3;
    a+=3;//简单明了
    
    a=a-10;
    a-=10;
    
    a=a>>1;
    a>>=1;
    
    a=a&1;
    a&=1;
}
```

### 单目操作符

```c
int main()
{
    3+5;//+ 有两个操作数 双目操作符
    //单目操作符-只有一个操作数的操作符
    
    return 0;
}
```

**！逻辑反操作**

```c
int main()
{
    int a=10;//10-非零-真
    printf("%d\n",!a);//0
    //把真变成假，假变成真
    int flag=1;
    if(!flag)//flag为假时进来
    {
        
    }
}
```

**-负值操作符**

```c
int main()
{
    int a=-10;
    a=-a;
    a=+a;//正号可以省略
}
```

**&取地址操作符**

```c
int main()
{
    int a=10;//4个字节空间
    int* pa=&a；//拿到了a的地址，指针变量
    return 0;
}
```

***解引用操作符**

```c
int main()
{
    int a=10;//4个字节空间
    int* pa=&a；//拿到了a的地址，指针变量
    *pa=20;//*解引用操作符，拿到a 
    return 0;
}
```

**sizeof操作符**

操作数的类型长度(单位是字节)

```c
int main()
{
    int a=10;
    int arr[10]={0};
    printf("%d\n",sizeof(arr));//计算数组的总大小
    printf("%d\n",sizeof(int[10]));
    printf("%d\n",sizeof(a));//4
    printf("%d\n",sizeof(int));//4
    return 0;
}
```

**~操作符**

对一个二进制位按位取反

```c
int main()
{
    int a=0;
    printf("%d\n",~a);
    //00000000000000000000000000000000
    //11111111111111111111111111111111补码
    //%d打印的是原码
    //11111111111111111111111111111110反码
    //10000000000000000000000000000001原码
    //-1
    return 0;
}
```

```c
int main()
{
    int a=14;
    a|=(1<<4);
    printf("%d\n",a);
    
    a&=(~(1 << 4));
    printf("%d\n",a);
    //00000000000000000000000000001110 将第五位变为1
    //00000000000000000000000000010000
    //按位或
    //00000000000000000000000000011110 将第五位再变回0
    //11111111111111111111111111101111
        //按位与则将第五位变回0，其他位不变
    return 0;
}
```

++ --操作符

```c
int main()
{
    //a++是表达式
    int a=10;			//a++表达式先使用a的值，a再++
    int b=a++;//后置++   //先使用a，再++
    printf("a=%d b=%d\n",a,b);//11 10
    
    int b=++a;//前置++   先++，后使用a
    printf("a=%d b=%d\n",a,b);//11 11
    return 0;
    
    int a=10;
    int b=a--;//后置--   //先使用a，再--
    printf("a=%d b=%d\n",a,b);//
    
    int a=10;
    int b=--a;//前置--   //先--，再使用a
    printf("a=%d b=%d\n",a,b);//
    
    int a=10;
    printf("%d\n",a++);
}
```

(类型)强制类型转换

```c
int main()
{
    int a=3.14;
    printf("%d\n",a);
    return 0;
}
```

会出现警告，不想出现警告，可以这样做

```c
int main()
{
    int a=(int)3.14;
    printf("%d\n",a);
    return 0;
}
```

### 关系操作符

```c
>
>=
<
<=
!=
==
```

在编程中小心==和=不小心写错导致错误

一些关系不能用关系操作符比较的：

例如字符串的比较

### 逻辑操作符

&&逻辑与

||逻辑或

```c
int main()
{
    int a=3;
    int b=5;
    //a&b;//按二进制位与
    //a&&b;//逻辑与
    int c=a&&b;//a,b都为真，c才为真
    printf("%d\n",c);
    return 0;
    
}
```

```c
int main()
{
    int a=0;
    int b=5;
    int c=a||b;//只要有一个真则为真
    printf("%d\n",c);
    return 0;  
}
```

```c
int main()
{
    int i=0,a=0,b=2,c=3,d=4;
    i = a++ && ++b && d++;
    printf("a=%d b=%d c=%d d=%d",a,b,c,d);//1 2 3 4
    return 0;
}
```

注意：对于&&操作符，左边如果为零，编译器就不会计算右边了

对于||操作符，左边如果为1，右边就不计算了

### 条件操作符

三目操作符-三个操作数

表达式1？表达式2：表达式3

表达式1为真，算的是表达式2的结果，否则为表达式3的值

```c
int main()
{
    int a=10;
    int b=20;
    int max=0;
    max=a>b?a:b;
    return 0;
}
```

### 逗号表达式

逗号表达式，就是用逗号隔开的多个表达式。逗号表达式，从左向右依次执行。整个表达式的结果是最后一个表达式的结果。

```c
int a=1;
int b=2;
int c=(a>b,a=b+10,a,b=a+1);//逗号表达式
```

### 下标引用、函数调用、和结构成员

**下标引用**

```c
int main()
{
    int arr[10]={1,2,3,4,5,6,7,8,9,10};
    //arr+4
    printf("%p\n",arr+4);//%p是打印地址的
    printf("%p\n",&arr[4]);
    
    printf("%d\n",*(arr+4));
    
    printf("%d\n",arr[4]);//下标引用操作符
    printf("%d\n",4[arr]);//下标引用操作符
    
    //*(arr+4) == arr[4]
    //*(4+arr) == 4[arr]
    return 0;
}
```

**函数调用**

```c
int main()
{
    printf("haha");//()函数调用操作符
    return 0;
}
```

**访问一个结构的成员**

```c
struct Book
{
  	char name[20];
    int price;
};
int main()
{
    struct Book a={"C语言",30};
    //结构体变量.成员变量
    printf("书名：%s  定价：%d\n",b.name,b.price);
    
    struct Book* pb=&b;
    //结构体指针->成员变量
    printf("书名：%s  定价：%d\n",pb->name,pb->price");
    return 0;
}
```

